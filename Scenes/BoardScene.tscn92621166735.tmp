[gd_scene load_steps=4 format=3 uid="uid://72kwr16oote3"]

[ext_resource type="Script" uid="uid://bf8w2m3ct20vy" path="res://Scenes/BoardScene.gd" id="1_l56c8"]

[sub_resource type="GDScript" id="GDScript_l56c8"]
script/source = "extends GridContainer

var buttons: Array = []

func create_grid(players: Array):
	clear_grid()
	for i in range(players.size()):
		var btn = Button.new()
		btn.text = players[i].name
		btn.pressed.connect(func(): _on_player_button_pressed(i))
		add_child(btn)
		buttons.append(btn)

func clear_grid():
	for child in get_children():
		child.queue_free()
	buttons.clear()

func get_total_buttons() -> int:
	return buttons.size()

func darken_all():
	for btn in buttons:
		btn.modulate = Color(0.2, 0.2, 0.2)

func highlight_single(index: int, color: Color):
	if index >= 0 and index < buttons.size():
		buttons[index].modulate = color

func _on_player_button_pressed(index: int):
	# Optional: if you want player click to do something separate
	pass
"

[sub_resource type="GDScript" id="GDScript_jf025"]
script/source = "extends Node

signal sweep_finished

var sweep_order: Array = []
var current_index: int = 0
var speed: float = 0.3
var total_buttons: int = 0
var active = false

func start_sweep(button_count: int, sweep_speed: float):
	total_buttons = button_count
	speed = sweep_speed
	sweep_order = range(button_count)
	current_index = 0
	active = true
	set_process(true)

func _process(delta):
	if not active:
		return
	# emit an update signal for UI here if needed
	current_index += 1
	if current_index >= total_buttons:
		active = false
		set_process(false)
		emit_signal(\"sweep_finished\")
"

[node name="BoardScene" type="Control"]
layout_mode = 3
anchors_preset = 0
script = ExtResource("1_l56c8")

[node name="RandomPickButton" type="Button" parent="."]
offset_left = 516.0
offset_top = 25.0
offset_right = 668.0
offset_bottom = 60.0

[node name="GridContainer" type="GridContainer" parent="."]
layout_mode = 0
offset_left = 139.0
offset_top = 85.0
offset_right = 195.0
offset_bottom = 129.0
columns = 5
script = SubResource("GDScript_l56c8")

[node name="Button2" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button3" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button4" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button5" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button6" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button7" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button8" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button9" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button10" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button11" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button12" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button13" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button14" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button15" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button16" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button17" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button18" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button19" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button20" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="Button21" type="Button" parent="GridContainer"]
layout_mode = 2

[node name="DuelPopup" type="Window" parent="."]
auto_translate_mode = 1
initial_position = 1
visible = false

[node name="Player1Label" type="Label" parent="DuelPopup"]
offset_left = 11.0
offset_top = 7.0
offset_right = 45.0
offset_bottom = 30.0

[node name="Player2Label" type="Label" parent="DuelPopup"]
anchors_preset = -1
anchor_left = 0.793
anchor_top = 0.2
anchor_right = 0.793
anchor_bottom = 0.2
offset_left = -51.3
offset_top = -6.0
offset_right = 17.7
offset_bottom = 17.0

[node name="CategoryLabel" type="Label" parent="DuelPopup"]
anchors_preset = -1
anchor_left = 0.49
anchor_top = 1.27
anchor_right = 0.49
anchor_bottom = 1.27
offset_left = -23.0
offset_top = -58.0
offset_right = 17.0
offset_bottom = -35.0

[node name="StartButton" type="Button" parent="DuelPopup"]
anchors_preset = -1
anchor_bottom = 0.19
offset_left = 29.0
offset_top = 89.0
offset_right = 61.0
offset_bottom = 78.0

[node name="Overlay" type="ColorRect" parent="."]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
script = SubResource("GDScript_jf025")
